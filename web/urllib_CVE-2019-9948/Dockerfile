from python:2.7.16-alpine

EXPOSE 8080
ENV WERKZEUG_HIDDEN_FLAG=glacierctf{Py2_I5Su3s_g0_brrrr}

WORKDIR /usr/src/app

RUN apk add build-base linux-headers

COPY challenge/requirements.txt .

RUN pip install -r requirements.txt

RUN pip install gunicorn

COPY challenge/. .

RUN pip install .

COPY glacier.db /tmp/glacier.db

CMD gunicorn -w 8 --bind 0.0.0.0:8080 glacier_webserver._main:app
